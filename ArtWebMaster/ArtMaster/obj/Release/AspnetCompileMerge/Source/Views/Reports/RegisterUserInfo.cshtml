@model ArtHandler.Model.UserInfoModel
@{
    ViewBag.Title = "ART :: " + "EmployeeVerification";
    Layout = "~/Views/LayoutMaster/_Layout1.cshtml";
}
<script src="~/Scripts/jquery.validate.js"></script>
<div class="content-container">

    <div class="col-sm-12 col-md-12 col-lg-12 page-title text-center">
        <img src="~/Images/ArtImages/user-enroll.svg" alt="user enrollment">
        <span>Employee Verification</span>
    </div>

    <form class="form-horizontal" role="form" id="regUserInfo-form" method="post" action="/Reports/RegisterUserInfo" autocomplete="off" style="display:none">
        <!-- content  section  start-->
        @Html.AntiForgeryToken()

        <div class="col-sm-12 col-md-12 col-lg-12 form-box">
            <!-- verification section starts here-->
            <div class="form-container row padding-T30">
                <div class="col-sm-12 col-md-12 col-lg-12">
                    <div class="col-sm-6 col-md-6 col-lg-6">
                        <p class="required">mobile number</p>
                        <input type="text" class="text-box" id="txtMobileNumber" value="@Model.mobilenumber" data-text="Please enter the mobile number">

                        <label id="lblMessageMobNum" class="error"></label>
                    </div>
                    <div class="col-sm-6 col-md-6 col-lg-6">
                        <p class="required">Select the country</p>
                        <select id="drpCountryCode" class="select-box" name="drpCountryCode">
                            @foreach (var item in Model.lstContryCodes)
                            {
                                if (item.CountryCode == Model.countrycode)
                                {
                                    <option value="@(item.CountryCode+"_"+item.TelephoneCode+"_"+item.MobileNumberLength)" selected="selected">@item.Name</option>
                                }
                                else
                                {
                                    <option value="@(item.CountryCode+"_"+item.TelephoneCode+"_"+item.MobileNumberLength)">@item.Name</option>
                                }
                            }
                        </select>
                        <label id="lblMessagePass" class="error"></label>
                    </div>

                    <div class="col-sm-12 col-md-12 col-lg-12 text-center margin-T30">
                        <button class="submit-btn Margin-Nil" type="button" id="btnSendOTP" value="SendOTP" name="btnAction">Send OTP</button>

                    </div>

                    @*<div class="col-sm-12 col-md-12 col-lg-12">
                            <label class="error" id="lblOTPExceedMsg"></label>
                        </div>*@
                    @if (Model.IsOTPSent == "1")
                    {
                        <div id="SectionOTP">
                            <div class="col-sm-12 col-md-12 col-lg-12 margin-T30 Padding-Nil" id="div-registerotp">
                                <div class="col-sm-8 col-md-8 col-lg-8" id="div-OTP">
                                 Please get the OTP from the caller and confirm with this OTP <b style="font-size:26px;">@TempData["GenOTP"]</b>
                                    <label id="lblMessage" class="error">@ViewBag.Message</label>
                                </div>
                                <div class="col-sm-4 col-md-6 col-lg-4 col-lg-offset-2" >
                                    @Html.CheckBox("register-otp", false)
                                    @Html.Label("Verified")
                                </div>                                
                            </div>

                            <div class="col-sm-12 col-md-12 col-lg-12 text-center margin-T30">
                                <button class="submit-btn Margin-Nil" type="button" id="btnenrollLink" value="EnrollmentLink" name="btnAction">send enrollment link</button>
                            </div>
                        </div>
                    }
                </div>
            </div>
            @*<div class="col-sm-12 col-md-12 col-lg-12 margin-T30">
                    <div class="col-sm-12 col-md-12 col-lg-12 ">
                    </div>
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <label class="error" id="lblOTPExceedMsg"></label>
                    </div>
                    <div class="col-sm-12 col-md-12 col-lg-12 Padding-Nil" id="contact-section">
                    </div>
                </div>*@
        </div>

        @Html.Hidden("btnAction")
        @Html.Hidden("txtMobileNum", Model.mobilenumber)
        @Html.Hidden("countryCode")
        @Html.Hidden("hdnuserid", Model.userid)
        @Html.Hidden("hdnsentOTP", Model.SentOTP)
        <input type="hidden" value="7061737323313233" id="hdky" />
    </form>

</div>
<!--Modal Success starts here-->
<div class="modal fade" id="modal-success" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content width-size">
            <div class="modal-header text-center ">
                <img src="~/Images/ArtImages/success-msg-tick.png">
            </div>

            <div class="modal-body text-center">
                <p class="modal-msg1">Great!</p>
                <p class="modal-msg2">A.R.T. enrollment link sent successfully.</p>

            </div>

            <div class="modal-footer">
                <button type="button" id="btnGoemployee" class="btn-modal bg-green " data-dismiss="modal">ok</button>
            </div>

        </div>
    </div>
</div>
<!--Modal Success ends here-->
<!-- register section ends here-->
<div class="modal fade" id="modal-fail" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content width-size">
            <div class="modal-header text-center ">
                <img src="~/Images/ArtImages/failure-msg-cancel.png">
            </div>

            <div class="modal-body text-center">
                <p class="modal-msg1">Oops!!</p>
                <p class="modal-msg2">@ViewBag.Message</p>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn-modal bg-red clsGoHome" data-dismiss="modal">ok</button>
            </div>

        </div>
    </div>
</div>
<script src="~/Scripts/ARTScript/RegisterUserInfo.js?v=@JSVersion.version"></script>
<script src="~/Scripts/cryptojs/core.js"></script>
<script src="~/Scripts/cryptojs/aes.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        registerUserInfo.defaults.defaultLang = '@Html.Raw(ViewBag.DefaultLang)';
        $("#btnenrollLink").hide();      
        registerUserInfo.defaults.EnterMobileNumber = '@Art.EnterMobileNumber';
        registerUserInfo.defaults.InvalidMobileNumber = '@Art.InvalidMobileNumber';


        registerUserInfo.defaults.OTPResendMsg = '@Art.OTPResendMsg';
        registerUserInfo.defaults.OTPMinMsg = '@Art.OTPMinMsg';
        registerUserInfo.defaults.PlsEnterOtp = '@Art.PlsEnterOtp';
        registerUserInfo.defaults.IsOtpAttemptExceed = '@ViewBag.IsOtpAttemptExceed';
        registerUserInfo.defaults.MaxAttempt = '@ViewBag.MaxAttempt';
        registerUserInfo.defaults.OTPMaxAttemptMsg = '@Art.OTPMaxAttemptMsg';
        registerUserInfo.defaults.IsValidOTP = '@Model.IsValidOTP';
        registerUserInfo.defaults.MobilNumberRegisterValidation = '@Art.MobilNumberRegisterValidation';
        registerUserInfo.defaults.Is_OTP_Enabled = '@ArtHandler.Model.Singleton.Instance.ClientSessionID.Is_OTP_Enabled'
        registerUserInfo.defaults.IS_DOB_Validation_Needed = '@ArtHandler.Model.Singleton.Instance.ClientSessionID.IS_DOB_Validation_Needed'
        registerUserInfo.defaults.OpenRegisterForOTP = '@ViewBag.OpenRegisterForOTP';
        registerUserInfo.defaults.EnterMobileNumber = "Please enter the mobile number";
        registerUserInfo.defaults.IsOTPSent = '@Model.IsOTPSent';
        registerUserInfo.defaults.Message = '@ViewBag.Success';
        registerUserInfo.init();
    });

</script>
